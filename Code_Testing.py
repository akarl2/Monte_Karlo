composition = [[[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['NH2', 1.0], ['NH', 0.0], ['NH2', 1.0]], [['DETA', 1]], [103.169]], [[['COOH', 1.0]], [['C14', 1]], [228.376]], [[['COOH', 1.0]], [['C14', 1]], [228.376]], [[['COOH', 1.0]], [['C14', 1]], [228.376]], [[['COOH', 1.0]], [['C14', 1]], [228.376]], [[['COOH', 1.0]], [['C14', 1]], [228.376]], [[['COOH', 1.0]], [['C14', 1]], [228.376]], [[['COOH', 1.0]], [['C14', 1]], [228.376]], [[['COOH', 1.0]], [['C14', 1]], [228.376]]]

while running:
    weights = []
    chemical = []
    for i, chemicals in enumerate(composition):
        index = 0
        for group in chemicals[0]:
            chemical.append([i, index, group[0]])
            weights.append(group[1])
            index += 1
    groups = random.choices(chemical, weights, k=2)
    while groups[0][0] == groups[1][0] or check_react(groups) is False:
        groups = random.choices(chemical, weights, k=2)
